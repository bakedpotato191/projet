<div class="wrapper">
        <mat-card *ngIf="post.utilisateur" class="card">
        <mat-card-header class="card-header">
          <div mat-card-avatar class="card-avatar">
              <a routerLink="/profile/{{post.utilisateur.username}}"><img class="avatar" src="{{ post.utilisateur.avatar }}"></a>
          </div>
          <mat-card-title><a routerLink="/profile/{{post.utilisateur.username}}">{{ post.utilisateur.prenom }} {{ post.utilisateur.nom }}</a></mat-card-title>
          <mat-card-subtitle>@{{ post.utilisateur.username }}</mat-card-subtitle>
        </mat-card-header>
        <mat-divider></mat-divider>
        <mat-card-image class="card-image">
            <img class="image" mat-card-image src="{{ post.url }}" alt="{{ post.description }}">
        </mat-card-image>
        <mat-divider></mat-divider>
        <mat-card-content class="card-content">
          <span>{{ post.description }}</span>
        </mat-card-content>
        <mat-divider></mat-divider>
        <mat-card-actions class="card-actions">
          <button mat-button><mat-icon aria-hidden="false" aria-label="Example home icon" [style.color]="post.isLiked ? '#3DA2DA' : 'FFFFFF'" (click)="likePost()">favorite</mat-icon></button>
          <button mat-button>SHARE</button>
          <mat-divider></mat-divider>
          <form class="form" name="form" (ngSubmit)="onSubmit()" novalidate >
            <input type="hidden" name="post_id" ng-value="post.id" [(ngModel)]="comment.id" required>
            <mat-form-field class="form-field">
              <textarea 
                matInput
                name="text" 
                class="form-control" 
                placeholder="Comment" 
                type="text"
                minlength="2" 
                maxlength="128" 
                required
                [(ngModel)]="comment.text"
                ></textarea>
                <mat-error>
                  Le commentaire doit comporter de 2 à 128 caractères au plus
                </mat-error>
            </mat-form-field>
            <button mat-stroked-button color="accent" class="btn-block">Add comment</button>
        </form>
        </mat-card-actions>
        <mat-divider></mat-divider>
        <mat-card-footer>
          <mat-list 
          *ngIf="post.comments.length > 0; else elseBlock"
            infiniteScroll
            [infiniteScrollDistance]="2"
            [infiniteScrollThrottle]="50"
            (scrolled)="onScroll()">
            <mat-list-item class="comment" *ngFor="let comment of post.comments">
              <span matLine class="comment-username demo-2"> {{comment.utilisateur.username }} </span>
              <span matLine class="comment-date demo-2"> {{ comment.date | timePast }} </span>
              <div class="avatar-container">
              <img matListAvatar src="{{ comment.utilisateur.avatar }}">
            </div>
              <p matLine class="comment-text">
                <span class=""> {{ comment.text }} </span>
              </p>
              <mat-divider></mat-divider>
            </mat-list-item>
           </mat-list>
           <ng-template #elseBlock>
             <div class="nocomments">Pas de commentaires.</div>
            </ng-template>          
        </mat-card-footer>
      </mat-card>  
</div>
