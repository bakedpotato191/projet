<div class="wrapper">
        <mat-card *ngIf="post; else elseBlock" class="card">
        <mat-card-header class="card-header">
          <div mat-card-avatar class="card-avatar">
              <a routerLink="/profile/{{post.utilisateur.username}}"><img class="avatar" src="{{ post.utilisateur.avatar }}"></a>
          </div>
          <mat-card-title><a routerLink="/profile/{{post.utilisateur.username}}">{{ post.utilisateur.prenom }} {{ post.utilisateur.nom }}</a></mat-card-title>
          <mat-card-subtitle>@{{ post.utilisateur.username }}</mat-card-subtitle>
        </mat-card-header>
        <mat-divider></mat-divider>
        <mat-card-image class="card-image">
            <img class="image" mat-card-image src="{{ post.url }}" alt="image">
        </mat-card-image>
        <mat-card-content class="card-content">
          <span>{{ post.description }}</span>
        </mat-card-content>
        <mat-divider></mat-divider>
        <mat-card-actions class="card-actions">

          <button mat-button id="dislikeBtn" *ngIf="post.liked"  (click)="dislike()"><mat-icon aria-hidden="false" aria-label="like icon" color="warn">favorite</mat-icon></button>
          <button mat-button id="likeBtn" *ngIf="!post.liked" (click)="like()"><mat-icon aria-hidden="false" aria-label="like icon">favorite</mat-icon></button>
          <button mat-button id="shareBtn">SHARE</button>
          <button mat-button id="deleteBtn" (click)="openDeletePostDialog(post.id)"><mat-icon aria-hidden="false" aria-label="like icon">delete</mat-icon></button>
          <mat-divider></mat-divider>
          <form class="form" name="form" (ngSubmit)="onSubmit()" novalidate>
            <input type="hidden" name="post_id" ng-value="post.id" [(ngModel)]="comment.id" required>
            <mat-form-field class="form-field" color="accent" floatLabel="always">
              <mat-label>Comment</mat-label>
              <textarea 
                matInput
                name="text"
                #textarea 
                class="form-control"  
                type="text"
                minlength="2" 
                maxlength="128"
                required
                [(ngModel)]="comment.text"
                ></textarea>
                <mat-error>
                  Le commentaire doit comporter de 2 à 128 caractères au plus
                </mat-error>
            </mat-form-field>
            <button mat-stroked-button *ngIf="!isLoading" color="accent" class="btn-block">Ajouter un commentaire</button>
            <mat-spinner *ngIf="isLoading" color="accent" [diameter]="25" aria-label="submitting the comment"></mat-spinner>
        </form>
      </mat-card-actions>
        <mat-divider></mat-divider>
      <app-comments></app-comments>
      </mat-card>
      <ng-template #elseBlock>
        <div id="notfound"><img src="https://static.thenounproject.com/png/1527904-200.png"><span>404 - Post n'a pas été trouvé ou a été supprimé par son auteur.</span></div>
      </ng-template> 
</div>
