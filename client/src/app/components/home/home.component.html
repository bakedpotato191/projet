<div class="home-wrapper h-100">
    <div *ngIf="user" class="container">
        <div id="profile-container">
            <div id="profile">
                <div id="profile-picture">
                    <img src="https://t4.ftcdn.net/jpg/02/15/84/43/360_F_215844325_ttX9YiIIyeaR7Ne6EaLLjMAmy4GvPC69.jpg"
                        alt="profile_picture">
                </div>
                <div class="profile-flex" fxLayout="column">
                        <div id="profile-name">
                            {{ user.nom }} {{ user.prenom }}
                        </div>    
                        <div id="settings-button">
                            <a id="settings" mat-stroked-button *ngIf="mypage" routerLink="/accounts/edit">Modifier profil</a>
                        </div>
                    <div *ngIf="!mypage" class="sub-buttons">
                        <button mat-raised-button *ngIf="!user.followed" color="accent"
                            (click)="follow()">S'abonner</button>
                        <button mat-raised-button *ngIf="user.followed" color="warn" (click)="unfollow()">Se
                            désabonner</button>
                    </div>
                </div>
                <div id="upload-button">
                    <button mat-stroked-button *ngIf="mypage" color="accent" (click)="openDialog()"><mat-icon aria-hidden="false" aria-label="Upload icon">add_a_photo</mat-icon></button>
                </div>
            </div>
            <ul fxLayout="row" id="data">
                <li id="numberPub" fxLayout="column"><span class="count">{{ user.postCount }}</span> publications</li>
                <li id="numberSubs" fxLayout="column"><span class="count">{{ user.followerCount }}</span> abonnés</li>
                <li id="numberSubbed" fxLayout="column"><span class="count">{{ user.followingCount }}</span> abonnements</li>
            </ul>
        </div>
        <mat-tab-group (selectedTabChange)="onTabChanged($event)" mat-stretched-tabs animationDuration="700ms" mat-align-tabs="center" color="accent">
            <mat-tab id='first-tab' mat-tab-link>
                <ng-template mat-tab-label>
                    <mat-icon class="example-tab-icon">photo_library</mat-icon> <span>Publications</span>
                  </ng-template>
                  <app-userposts></app-userposts>
            </mat-tab>

                <mat-tab *ngIf="mypage" mat-tab-link>
                    <ng-template mat-tab-label>
                        <mat-icon class="example-tab-icon">star</mat-icon>
                      <span>Enregistrements</span></ng-template>
                    <router-outlet name="favorites"></router-outlet>
                </mat-tab>

        </mat-tab-group>
    </div>
</div>